PGENE = 0	//0-demo build, 1-standalone part 
                                                 
LOAD_ADDRESS equ $1000                        
RUN_ADDRESS equ main                          
                                                 
   .if PGENE = 0                                 
       icl 'sls.hea'                             
       icl 'pd_macro.hea'                        
       part_header                               
   .else                                         
       org LOAD_ADDRESS                          
       icl 'atari.hea'                           
       icl '..\..\lib\stdlib.asm'                
   .endif                                        
                                                 
       utils_wait_one_frame                      
       utils_wait_x_frame                        
main\ .print 'main:', main
   .if PGENE = 1
    run main
       jsr rom_off  
   .else        
       lda end_eff  
       beq * -2     
   .endif       
    jmp start
   //--------------------------------------------
x0 equ 80
y0 equ 81
x1 equ 82
y1 equ 83
currOff equ 84
tmpA equ 86
tmpB equ 87
tmpC equ 88
tmpVar1 equ 89
shortLen equ 112
longLen equ 113
dib equ 114
k equ 115
swapY equ 116
yLonger equ 117
tmpVar2 equ 128
tmpVar3 equ 129
clrTableOffset equ 134
clrTableTarLo equ 135
clrTableTarHi equ 137
clrTablePat equ 145
drawOnFont equ 147
bck equ 148
fontAddrSw equ 149
grlo equ 150
grhi equ 151
tmpD equ 152
tmpE equ 154
tmpF equ 156
tmpG equ 156
cnt equ 158
cntcnt equ 160
dumb equ 170
duma equ 43690
fontAddr1 equ 24576
fontAddr2 equ 25600
pmgraph0 equ 4096
pmgraph1 equ 6144
pmgraph2 equ 8192
pmgraph3 equ 10240
     org $1300
     .by 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 32 112 240 240 241 241 249 249 255 255 255 127 63 15 31 63 63 127 127 127 127 127 127 63 31 31 15 15 7 7 3 1 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 3 63 63 127 127 127 127 255 255 255 255 255 255 255 247 231 231 231 195 195 131 131 129 129 1 1 129 193 225 241 251 255 255 255 255 255 255 255 255 255 127 63 255 255 255 255 255 255 112 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 60 126 126 126 255 255 255 255 255 255 255 255 255 255 126 126 126 126 126 126 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 128 192 252 252 254 254 254 254 255 255 255 255 255 255 255 239 231 231 231 227 195 193 193 193 129 128 128 129 131 135 143 223 255 255 255 255 255 255 255 255 255 254 252 255 255 255 255 255 255 14 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 14 15 15 143 143 159 159 255 255 255 254 252 240 248 252 252 254 254 254 254 254 254 252 248 248 240 240 224 224 192 128 0 0 128 128 128 128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
     org $1B00
     .by 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 32 112 240 240 248 248 248 248 248 253 125 127 63 63 15 15 7 7 3 3 28 62 63 127 127 127 127 127 127 63 31 31 15 15 7 7 3 1 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 19 63 127 127 127 127 255 255 255 255 255 255 255 255 247 231 231 199 199 131 131 3 3 1 1 1 129 193 225 241 251 255 255 255 255 255 255 255 255 255 127 63 255 255 255 255 255 255 112 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 60 126 126 126 255 255 255 255 255 255 255 255 255 255 126 126 126 126 126 126 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 200 252 254 254 254 254 255 255 255 255 255 255 255 255 239 231 231 227 227 193 193 192 192 128 128 128 129 131 135 143 223 255 255 255 255 255 255 255 255 255 254 252 255 255 255 255 255 255 14 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 14 15 15 31 31 31 31 31 191 190 254 252 252 240 240 224 224 192 192 56 124 252 254 254 254 254 254 254 252 248 248 240 240 224 224 192 128 0 0 128 128 128 128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
     org $2300
     .by 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 16 24 60 60 60 56 56 56 56 120 120 120 56 56 56 56 120 120 125 125 127 127 127 127 127 127 60 24 0 0 0 0 28 62 63 127 127 127 127 127 127 63 31 31 15 15 7 7 3 1 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 19 63 63 63 127 127 255 255 255 255 255 255 255 239 199 7 7 7 7 3 3 3 1 1 1 1 129 193 225 241 251 255 255 255 255 255 255 255 255 255 127 63 255 255 255 255 255 255 112 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 60 126 126 126 255 255 255 255 255 255 255 255 255 255 126 126 126 126 126 126 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 232 252 252 252 254 254 255 255 255 255 255 255 255 247 227 224 224 224 224 192 192 192 128 128 128 128 129 131 135 143 223 255 255 255 255 255 255 255 255 255 254 252 255 255 255 255 255 255 14 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 24 60 60 60 28 28 28 28 30 30 30 28 28 28 28 30 30 190 190 254 254 254 254 254 126 30 24 0 0 0 0 56 124 252 254 254 254 254 254 254 252 248 248 240 240 224 224 192 128 0 0 128 128 128 128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    org $2B00
    .by 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 28 28 60 62 62 62 62 62 62 62 60 60 56 56 56 60 60 60 60 124 125 127 127 127 127 127 127 63 30 28 0 0 0 0 0 0 0 0 28 62 63 127 127 127 127 127 127 63 31 31 15 15 7 7 3 1 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 26 127 127 255 255 255 255 255 255 255 255 255 159 15 7 7 7 7 7 3 3 3 3 1 1 1 1 129 193 225 241 251 255 255 255 255 255 255 255 255 255 127 63 255 255 255 255 255 255 112 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 60 126 126 126 255 255 255 255 255 255 255 255 255 255 126 126 126 126 126 126 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 88 254 254 255 255 255 255 255 255 255 255 255 249 240 224 224 224 224 224 192 192 192 192 128 128 128 128 129 131 135 143 223 255 255 255 255 255 255 255 255 255 254 252 255 255 255 255 255 255 14 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 16 56 56 60 124 124 124 124 124 124 124 60 60 28 28 28 60 60 60 60 62 190 254 254 254 254 254 254 252 120 56 0 0 0 0 0 0 0 0 56 124 252 254 254 254 254 254 254 252 248 248 240 240 224 224 192 128 0 0 128 128 128 128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
graph0 equ 12288
graphI equ 14336
    org $3000
   // Source: '.\data\scr18.asm'
 .by 032 036 040 044 016 020 024 028 032 036 040 044 048 052 056 060 064 068 072 076 016 020 024 028 064 068 072 076 032 036 040 044 016 020 024 028 048 052 056 060 033 037 041 045 017 021 025 029 033 037 041 045 049 053 057 061 065 069 073 077 017 021 025 029 065 069 073 077 033 037 041 045 017 021 025 029 049 053 057 061 034 038 042 046 018 022 026 030 034 038 042 046 050 054 058 062 066 070 074 078 018 022 026 030 066 070 074 078 034 038 042 046 018 022 026 030 050 054 058 062 035 039 043 047 019 023 027 031 035 039 043 047 051 055 059 063 067 071 075 079 019 023 027 031 067 071 075 079 035 039 043 047 019 023 027 031 051 055 059 063 024 028 016 020 024 028 032 036 040 044 064 068 072 076 016 020 024 028 048 052 056 060 032 036 040 044 048 052 056 060 064 068 072 076 048 052 056 060 016 020 025 029 017 021 025 029 033 037 041 045 065 069 073 077 017 021 025 029 049 053 057 061 033 037 041 045 049 053 057 061 065 069 073 077 049 053 057 061 017 021 026 030 018 022 026 030 034 038 042 046 066 070 074 078 018 022 026 030 050 054 058 062 034 038 042 046 050 054 058 062 066 070 074 078 050 054 058 062 018 022 027 031 019 023 027 031 035 039 043 047 067 071 075 079 019 023 027 031 051 055 059 063 035 039 043 047 051 055 059 063 067 071 075 079 051 055 059 063 019 023 064 068 072 076 016 020 024 028 048 052 056 060 016 020 024 028 032 036 040 044 064 068 072 076 048 052 056 060 032 036 040 044 016 020 024 028 048 052 056 060 065 069 073 077 017 021 025 029 049 053 057 061 017 021 025 029 033 037 041 045 065 069 073 077 049 053 057 061 033 037 041 045 017 021 025 029 049 053 057 061 066 070 074 078 018 022 026 030 050 054 058 062 018 022 026 030 034 038 042 046 066 070 074 078 050 054 058 062 034 038 042 046 018 022 026 030 050 054 058 062 067 071 075 079 019 023 027 031 051 055 059 063 019 023 027 031 035 039 043 047 067 071 075 079 051 055 059 063 035 039 043 047 019 023 027 031 051 055 059 063 072 076 016 020 024 028 032 036 040 044 048 052 056 060 016 020 024 028 032 036 040 044 064 068 072 076 032 036 040 044 048 052 056 060 016 020 024 028 064 068 073 077 017 021 025 029 033 037 041 045 049 053 057 061 017 021 025 029 033 037 041 045 065 069 073 077 033 037 041 045 049 053 057 061 017 021 025 029 065 069 074 078 018 022 026 030 034 038 042 046 050 054 058 062 018 022 026 030 034 038 042 046 066 070 074 078 034 038 042 046 050 054 058 062 018 022 026 030 066 070 075 079 019 023 027 031 035 039 043 047 051 055 059 063 019 023 027 031 035 039 043 047 067 071 075 079 035 039 043 047 051 055 059 063 019 023 027 031 067 071
     org $3800
    // Source: '.\data\scr0.asm'
 .by 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 008 012 000 004 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 009 013 001 005 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 010 014 002 006 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007 011 015 003 007
clrTableData equ 16384
clrTableData2 equ 16745
    org $4000
clrtab1
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    rts
    org $4169
clrtab2
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    lda #$00
    sta $D01E
    rts
    org $4400
   //DL ------------------
   .align $0400
dlist1
m equ 34
   .by $60
dlist1t1
grAddr
   .by 98
   .wo 14336
   .by 34 34 34 34 34 34 34 34 34 34
   .by 34 34 34 34 34 34 34 34 34 34
   .by 34 34 34 34 34 34 34 2
   .by 65
   .wo dlist1
   //---------------------
addrOffLong
   .by 0 12 24 36 48
addrOffShort
   .by 0 21 47 33 14
circdata1x
   .by 25 25 25 24 24 23 23 22 21 21 20 19 18 17 16 15 14 13 12 11 10 9 9 8 7 7 6 6 5 5 5 5 5 5 5 6 6 7 7 8 9 9 10 11 12 13 14 15 16 17 18 19 20 21 21 22 23 23 24 24 25 25 25 25
circdata1y
   .by 16 17 18 19 20 21 21 22 23 23 24 24 25 25 25 25 25 25 25 24 24 23 23 22 21 21 20 19 18 17 16 15 14 13 12 11 10 9 9 8 7 7 6 6 5 5 5 5 5 5 5 6 6 7 7 8 9 9 10 11 12 13 14 15
circdata2x
   .by 21 21 21 21 20 20 20 19 19 18 18 17 17 16 16 15 14 14 13 13 12 12 11 11 10 10 10 9 9 9 9 9 9 9 9 9 10 10 10 11 11 12 12 13 13 14 14 15 16 16 17 17 18 18 19 19 20 20 20 21 21 21 21 21
circdata2y
   .by 16 16 17 17 18 18 19 19 20 20 20 21 21 21 21 21 21 21 21 21 20 20 20 19 19 18 18 17 17 16 16 15 14 14 13 13 12 12 11 11 10 10 10 9 9 9 9 9 9 9 9 9 10 10 10 11 11 12 12 13 13 14 14 15
divtab
   .by 0 0 0 0 0 0 0 0 42 0 85 153 25 204 51 0 76 113 0 142 192
xbitTable
   .by 128 64 32 16 8 4 2 1 128 64 32 16 8 4 2 1 128 64 32 16 8 4 2 1 128 64
ybitTable
   .by 0 0 0 0 0 0 0 0
   .by 32 32 32 32 32 32 32 32
   .by 64 64 64 64 64 64 64 64
   .by 96 96
ctrtab
    dta b(0,6,12,18,24,30,36,66,80,100,120,204,206,208,210,212,214,216,218,220,92,96,100,112,114,116,118,120,122,124,126,128,130,132,134,136,138,150,200,204,208,240,0,98,100,102,104,106,108,110,112,114,116,118,120,128,130,132,134,136,138,140,142,144,146,148,150,158,160,162,164,166,168,170,172,174,176,178,180,188,190,192,194,196,198,200,202,204,206,208,210,4,8,12,16,20,24,28)
ctraddrtab
    dta a(c_0,c_1,c_2,c_3,c_4,c_5,c_6,c_b1,c_b2,c_b3,c_b4,c_a1,c_a1,c_a1,c_a1,c_a1,c_a1,c_a1,c_a1,c_a2,c_cs1,c_cs2,c_cs3,c_k0,c_k1,c_k2,c_k3,c_k4,c_k5,c_k6,c_kk0,c_kk1,c_kk2,c_kk3,c_kk4,c_kk5,c_kk6,c_cs4,c_cs5,c_cs6,c_cs7,c_cs8,c_d1,c_di00,c_di0,c_di0,c_di0,c_di0,c_di0,c_di0,c_di0,c_di0,c_di0,c_di0,c_di0,c_di11,c_di1,c_di1,c_di1,c_di1,c_di1,c_di1,c_di1,c_di1,c_di1,c_di1,c_di1,c_di22,c_di2,c_di2,c_di2,c_di2,c_di2,c_di2,c_di2,c_di2,c_di2,c_di2,c_di2,c_di33,c_di3,c_di3,c_di3,c_di3,c_di3,c_di3,c_di3,c_di3,c_di3,c_di3,c_di3,c_f2,c_f3,c_f4,c_f5,c_f6,c_f7,c_f8)
tmpfnt1
    .by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 254 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 254 252 254 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 252 251 250 251 252 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 191 191 191 127 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
.by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 252 249 242 244 242 249 252 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 63 159 95 159 63 127 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 252 243 245 232 236 232 245 243 252 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 159 95 47 111 47 95 159 127 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 248 231 237 216 208 216 208 216 237 231 248 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 63 207 111 55 23 55 23 55 111 207 63 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 248 231 217 164 160 80 64 96 64 80 160 164 217 231 248 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 63 207 55 75 11 21 5 13 5 21 11 75 55 207 63 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 255 255 255 255 254 254 253 253 253 253 253 254 254 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 248 231 153 32 80 128 160 0 0 128 0 0 160 128 72 32 153 231 248 255 255 255 255 255 255 255 255 255 255 255 255 255 63 207 51 9 37 2 10 1 1 3 1 1 10 2 37 9 51 207 63 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 127 127 127 127 255 255 255 255 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 255 255 254 254 253 250 250 244 244 244 246 244 244 244 250 250 253 254 254 255 255 255 255 255 255 255 255 255 255 255 255 240 207 177 64 144 0 0 128 0 0 0 0 0 0 0 128 0 0 144 64 177 207 240 255 255 255 255 255 255 255 255 255 31 231 27 4 18 1 0 2 0 0 0 0 0 0 0 2 0 1 10 4 27 231 31 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 191 191 95 95 95 223 95 95 95 191 191 127 255 255 255 255 255 255 255 255 255 255
     .by 255 255 255 255 255 254 253 250 244 244 234 232 208 208 208 212 208 208 208 232 234 244 244 250 253 254 255 255 255 255 255 255 255 255 240 207 48 193 32 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 32 193 48 207 240 255 255 255 255 255 31 231 25 6 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 9 6 25 231 31 255 255 255 255 255 255 255 255 255 127 191 95 95 175 47 23 23 23 87 23 23 23 47 175 95 95 191 127 255 255 255 255 255 255 255
tmpfnt2
     .by 255 255 254 253 250 244 232 208 208 168 160 64 64 64 64 80 64 64 64 64 160 168 208 208 232 244 250 253 254 255 255 255 224 159 96 129 64 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 64 129 96 159 224 255 15 243 12 3 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 3 12 243 15 255 255 255 255 127 191 95 47 23 23 43 11 5 5 5 5 21 5 5 5 5 11 43 23 23 47 95 191 127 255 255 255 255
start
    lda #$62
    sta $A2
    copy #tmpfnt1 #(tmpfnt1+0x80) #fontAddr1
    lda #$0F
    sta $59
    lda #$80
    sta $80
    lda #$60
    sta $81
skcp1
    copy #tmpfnt2 #(tmpfnt2+0x80) tmpVar2
    clc
    lda #$80
    adc $80
    sta $80
    bcc @+
    inc $81
@
    dec $59
    bne skcp1
    lda #$02
    sta $59
    lda #$80
    sta $80
    lda #$32
    sta $81
skcp2
    copy #graph0 #(graph0+40*16) tmpVar2
    clc
    lda #$80
    adc $80
    sta $80
    lda #$02
    adc $81
    sta $81
    dec $59
    bne skcp2
    lda #$05
    sta $59
    lda #$40
    sta $80
    lda #$39
    sta $81
skcp3
    copy #graphI #(graphI+40*8) tmpVar2
    clc
    lda #$40
    adc $80
    sta $80
    lda #$01
    adc $81
    sta $81
    dec $59
    bne skcp3
    jsr wait_one_frame
    jsr wait_one_frame
    lda #$60
    sta $D409
    lda #$01
    sta $93
    lda #$02
    sta $D401
 lda #$01
    sta $D01A
 lda #$91
    sta $D018
 sta $D017
    mwa #dlist1 dlptr
    lda #$3E
    sta $D400
    lda #$01
    sta $D01B
    lda #$6C
    sta $D007
    lda #$6E
    sta $D006
    lda #$70
    sta $D005
    lda #$72
    sta $D004
    lda #$74
    sta $D000
    lda #$7C
    sta $D001
    lda #$84
    sta $D002
    lda #$8C
    sta $D003
    lda #$02
    sta $D008
    sta $D009
    sta $D00A
    sta $D00B
    sta $D00C
 lda #$01
    sta $D012
    sta $D013
    sta $D014
    sta $D015
 lda #$00
    sta $D011
    sta $D00D
    sta $D00D
    sta $D00E
    sta $D00F
    sta $D010
    lda #$03
    sta $D01D
    lda #$10
    sta $D407
    jsr wait_one_frame
    lda #$00
    sta $D012
    sta $D013
    sta $D014
    sta $D015
    jsr wait_one_frame
    jsr wait_one_frame
    jsr wait_one_frame
   //Main program ------------
    lda #$00
    sta $80
    sta $81
    lda #$10
    sta $56
    ldx #$B0
    stx $58
    lda #$00
    sta $96
    lda #$38
    sta $97
    lda #$1C
    sta $98
    lda #$47
    sta $99
    lda #$9C
    sta $9A
    lda #$47
    sta $9B
    lda #$00
    sta $9C
    lda #$60
    sta $9D
    lda #$00
    sta $9E
    lda #$64
    sta $9F
    lda #$01
    sta $57
    lda #$00
    sta $A0
mainloop
    lda $A2
    beq gojmp
    lda $A0
ctrinctr
    ldx #$00
    cmp ctrtab,x
    bne gojmp
    dec $A2
    inx
    stx ctrinctr+1
addrincr
    ldx #$00
    lda ctraddrtab,x
    sta gojmp+1
    lda ctraddrtab+1,x
    sta gojmp+2
    inx
    inx
    stx addrincr+1
gojmp
    jmp $aaaa
c_0
 lda #$91
    sta $D018
    jmp c
c_1
 lda #$93
    sta $D018
    jmp c
c_2
 lda #$95
    sta $D018
    jmp c
c_3
 lda #$97
    sta $D018
    jmp c
c_4
 lda #$99
    sta $D018
    jmp c
c_5
 lda #$9B
    sta $D018
    jmp c
c_6
 lda #$9D
    sta $D018
    jmp c
c_b1
    lda #$08
    sta $56
    jmp c
c_b2
    lda #$04
    sta $56
    jmp c
c_b3
    jsr resizeClk
    lda #$02
    sta $56
    jmp c
c_b4
    lda #$01
    sta $56
    jmp c
c_a1
    jsr resizeClk
    jmp c
c_a2
    jsr resizeClk
    lda #$01
    sta $81
    lda #$00
    sta $96
    lda #$30
    sta $97
    lda #$30
    ora #$0F
    and $4403
    sta $4403
    jmp c
c_cs1
    lda #$18
    sta $D407
    jmp c
c_cs2
    lda #$20
    sta $D407
    jmp c
c_cs3
    lda #$00
    sta $56
    lda #$28
    sta $D407
    jmp c
c_k0
    lda #$9A
    sta $D018
    jmp c
c_k1
 lda #$99
    sta $D018
    jmp c
c_k2
 lda #$97
    sta $D018
    jmp c
c_k3
 lda #$95
    sta $D018
    jmp c
c_k4
 lda #$93
    sta $D018
    jmp c
c_k5
 lda #$91
    sta $D018
    jmp c
c_k6
 lda #$01
    sta $D018
    sta $D017
    jmp c
c_kk0
 lda #$31
    sta $D018
 lda #$31
    sta $D017
    jmp c
c_kk1
 lda #$33
    sta $D018
    jmp c
c_kk2
 lda #$35
    sta $D018
    jmp c
c_kk3
 lda #$37
    sta $D018
    jmp c
c_kk4
 lda #$39
    sta $D018
    jmp c
c_kk5
 lda #$3B
    sta $D018
    jmp c
c_kk6
 lda #$3D
    sta $D018
    jmp c
c_cs4
    lda #$02
    sta $81
    jmp c
c_cs5
    lda #$20
    sta $D407
    jmp c
c_cs6
    lda #$18
    sta $D407
    jmp c
c_cs7
    lda #$10
    sta $D407
    jmp c
c_cs8
    lda #$01
    sta $56
    jmp c
c_d1
    lda #$02
    sta $56
    jmp c
c_di00
    lda #$00
    sta $81
 lda #$1E
    sta $98
    lda #$4C
    sta $99
 lda #$9E
    sta $9A
    lda #$4C
    sta $9B
    lda #$80
    sta $9C
    lda #$60
    sta $9D
    lda #$80
    sta $9E
    lda #$64
    sta $9F
    jmp c
c_di0
    jsr resizeClk2
    jmp c
c_di11
 lda #$1E
    sta $98
    lda #$4C
    sta $99
 lda #$9E
    sta $9A
    lda #$4C
    sta $9B
    lda #$00
    sta $9C
    lda #$61
    sta $9D
    lda #$00
    sta $9E
    lda #$65
    sta $9F
    jmp c
c_di1
    jsr resizeClk2
    jmp c
c_di22
 lda #$1E
    sta $98
    lda #$4C
    sta $99
 lda #$9E
    sta $9A
    lda #$4C
    sta $9B
    lda #$80
    sta $9C
    lda #$61
    sta $9D
    lda #$80
    sta $9E
    lda #$65
    sta $9F
    jmp c
c_di2
    jsr resizeClk2
    jmp c
c_di33
 lda #$1E
    sta $98
    lda #$4C
    sta $99
 lda #$9E
    sta $9A
    lda #$4C
    sta $9B
    lda #$00
    sta $9C
    lda #$62
    sta $9D
    lda #$00
    sta $9E
    lda #$66
    sta $9F
    jmp c
c_di3
    jsr resizeClk2
    jmp c
c_f2
 lda #$3B
    sta $D018
    jmp c
c_f3
 lda #$39
    sta $D018
    jmp c
c_f4
 lda #$37
    sta $D018
    jmp c
c_f5
 lda #$35
    sta $D018
    jmp c
c_f6
 lda #$33
    sta $D018
    jmp c
c_f7
 lda #$31
    sta $D018
    jmp c
c_f8
 lda #$31
    sta $D018
    sta $D017
    lda #$00
    sta $D01D
   //Return from part.

   .if PGENE = 0     
     restore_nmi     
     mva #0 dmactl   
     lda #<trans     
     ldy #>trans     
     jsr OS_DECRUNCH 
     jmp $400        
   .else             
     jmp *           
   .endif            
    rts
c
    mwa #d gojmp+1
d
    lda #$01
    sta $57
    lda $56
    cmp #$FF
    beq skpscrol
    cmp #$10
    beq spd16
    cmp #$08
    beq spd8
    cmp #$04
    beq spd4
    cmp #$02
    beq spd2
    cmp #$01
    beq spd1
    lda #$02
    sta $57
    jmp spd1
spd16
    lda $4402
    clc
    adc #$50
    sta $4402
    bcc skp19
    inc $4403
    bne skp19
spd4
    inc $80
    inc $80
spd2
    inc $80
spd1
    inc $80
    lda $80
    and #$07
    sta $80
    sta $D405
    bne skp20
spd8
    lda $4402
    clc
    adc #$28
    sta $4402
    bcc skp19
    inc $4403
skp19
    lda $4402
    cmp #$80
    bne skp20
    lda $96
    sta $4402
    lda $97
    sta $4403
skp20
skpscrol
    lda #$80
    sta $54
    lda #$00
    sta $55
    lda #$00
    sta $59
    lda $81
    beq skpdrw
    ldx $93
    bne swclr1
    lda #$01
    sta $91
    lda #$40
    sta $92
    lda #$03
    sta $87
    lda #$40
    sta $88
    lda #$04
    sta $89
    lda #$40
    sta $8A
    lda #$60
    sta $95
    jsr clrtab1
    jmp swclr2
swclr1
    lda #$6A
    sta $91
    lda #$41
    sta $92
    lda #$6C
    sta $87
    lda #$41
    sta $88
    lda #$6D
    sta $89
    lda #$41
    sta $8A
    lda #$64
    sta $95
    jsr clrtab2
swclr2
    lda $81
    cmp #$02
    beq bckwrd
    jsr DrawClock
    jsr DrawClock
    jsr DrawClock
    jsr DrawClock
    jmp skpbck
bckwrd
    jsr DrawClock2
    jsr DrawClock2
    jsr DrawClock2
    jsr DrawClock2
skpbck
skpdrw
    ldy $57
wfr
    jsr wait_one_frame
    inc $A0
    dey
    bne wfr
    lda $81
    beq skpdrw2
    ldx $93
    bne skdr1
    lda #$60
    inx
    bne skdr2
skdr1
    dex
    lda #$64
skdr2
    stx $93
    sta $D409
skpdrw2
    jmp mainloop
DrawClock
    lda #$00
    sta $86
    inc $59
    lda #$0F
    sta $50
    sta $51
    ldx $59
    inc $4423,x
    lda $4423,x
    and #$3F
    tax
    lda $442D,x
    sta $52
    lda $446D,x
    sta $53
    jsr DrawLineOnFont
    lda #$0F
    sta $50
    sta $51
    ldx $59
    lda $4423,x
    and #$0F
    bne skp4
    inc $4428,x
skp4
    lda $4428,x
    and #$3F
    tax
    lda $44AD,x
    sta $52
    lda $44ED,x
    sta $53
    jsr DrawLineOnFont
    clc
    lda #$5A
    adc $91
    sta $91
    bcc @+
    inc $92
@
    clc
    lda #$5A
    adc $87
    sta $87
    bcc @+
    inc $88
@
    clc
    lda #$5A
    adc $89
    sta $89
    bcc @+
    inc $8A
@
    clc
    lda #$80
    adc $54
    sta $54
    bcc @+
    inc $55
@
    rts
DrawLineOnFont
    lda $52
    cmp $50
    bcs skpSw
    ldx $50
    sta $50
    stx $52
    ldx $51
    lda $53
    sta $51
    stx $53
skpSw
    ldy #$00
    lda $53
    cmp $51
    bcs skpMr
    lda $51
    asl
    sec
    sbc $53
    sta $53
    iny
skpMr
    sty $74
    ldx #$00
    stx $72
    sec
    sbc $51
    sta $70
    tay
    lda $52
    sec
    sbc $50
    sta $71
    cmp $70
    bcs sk5
    sta $70
    sty $71
    inx
sk5
    stx $75
    lda $71
    beq sk6
    lda $70
    beq sk6
    cmp $71
    beq sk6
    asl
    adc $71
    tax
    lda $452D,x
    sta $72
sk6
    lda #$80
    sta $73
    lda $75
    beq sk7
    lda $74
    bne sk8
    lda $71
    clc
    adc $51
    sta $71
sk10
    jsr DrawPointOnFont
    inc $51
    lda $73
    clc
    adc $72
    sta $73
    bcc sk9
    inc $50
sk9
    lda $71
    cmp $51
    bcs sk10
    rts
sk8
    lda $51
    sec
    sbc $71
    sta $71
sk12
    jsr DrawPointOnFont
    dec $51
    lda $73
    clc
    adc $72
    sta $73
    bcc sk11
    inc $50
sk11
    lda $51
    cmp $71
    bcs sk12
    rts
sk7
    lda $71
    cmp $70
    bne sk13
    clc
    adc $50
    sta $71
    lda $74
    bne sk14
sk15
    jsr DrawPointOnFont
    inc $50
    inc $51
    lda $71
    cmp $50
    bcs sk15
    rts
sk14
    jsr DrawPointOnFont
    dec $51
    inc $50
    lda $71
    cmp $50
    bcs sk14
    rts
sk13
    lda $71
    clc
    adc $50
    sta $71
    lda $74
    bne sk16
sk18
    jsr DrawPointOnFont
    inc $50
    lda $73
    clc
    adc $72
    sta $73
    bcc sk17
    inc $51
sk17
    lda $71
    cmp $50
    bcs sk18
    rts
sk16
    jsr DrawPointOnFont
    inc $50
    lda $73
    clc
    adc $72
    sta $73
    bcc sk19
    dec $51
sk19
    lda $71
    cmp $50
    bcs sk16
    rts
DrawPointOnFont
    ldx $50
    lda $455C,x
    clc
    adc $51
    sta $40
    lda $95
    sta $41
    ldy #$00
    lda ($40),y
    ldy $86
    sta ($91),y
    lda $40
    adc $54
    sta $40
    sta ($87),y
    lda $41
    adc $55
    sta $41
    sta ($89),y
    tya
    adc #$05
    sta $86
    ldy #$00
    lda ($40),y
    ora $4542,x
    sta ($40),y
    rts
resizeClk
    copy tmpD tmpE tmpF
    lda $9A
    sta $98
    lda $9B
    sta $99
    clc
    lda #$80
    adc $9A
    sta $9A
    bcc @+
    inc $9B
@
    rts
resizeClk2
    lda $98
    sta $9A
    lda $99
    sta $9B
    sec
    lda $98
    sbc #$80
    sta $98
    bcs @+
    dec $99
@
    copy tmpD tmpE tmpF
    copy tmpD tmpE tmpG
    rts
DrawClock2
    lda #$00
    sta $86
    inc $59
    lda #$0F
    sta $50
    sta $51
    ldx $59
    dec $4423,x
    lda $4423,x
    and #$3F
    tax
    lda $442D,x
    sta $52
    lda $446D,x
    sta $53
    jsr DrawLineOnFont
    lda #$0F
    sta $50
    sta $51
    ldx $59
    lda $4423,x
    and #$0F
    bne skp4_2
    dec $4428,x
skp4_2
    lda $4428,x
    and #$3F
    tax
    lda $44AD,x
    sta $52
    lda $44ED,x
    sta $53
    jsr DrawLineOnFont
    clc
    lda #$5A
    adc $91
    sta $91
    bcc @+
    inc $92
@
    clc
    lda #$5A
    adc $87
    sta $87
    bcc @+
    inc $88
@
    clc
    lda #$5A
    adc $89
    sta $89
    bcc @+
    inc $8A
@
    clc
    lda #$80
    adc $54
    sta $54
    bcc @+
    inc $55
@
    rts
   .proc copy(.word souLo, endsou, tarLo) .var         
   .var endsou .word                                   
        mva endsou endsouLo                            
        mva endsou+1 endsouHi                          
                                                       
start                                               
       sec                                             
endsouLo equ *+1\ lda #dumb                         
       sbc souLo                                       
       tax                                             
endsouHi equ *+1\ lda #dumb                         
       sbc souHi                                       
       tay                                             
       beq rs                                          
       ldx #0                                          
l1                                                  
souLo equ *+1\souHi equ *+2\ lda duma, x            
tarLo equ *+1\tarHi equ *+2\ sta duma, x            
       dex                                             
       bne l1                                          
       inc souHi                                       
       inc tarHi                                       
       tya                                             
       bne start                                       
rs  dew souLo                                       
       dew tarLo                                       
       txa                                             
       bne l1                                          
re  rts                                             
   .endp                                               
trans ins '12_go_to_boxpic.obx.bc'
   //Code end -------------
